---
tags:
  - 组合数
  - 取模的性质
  - 数学归纳法
  - 唯一分解定理
  - 好题
title: '证明 $\frac{n^2(n^2-1)}{12} \in Z$ 的多种方法及其变形题'
ctime: '1757408012961'
ctime_f: '2025-09-09 16:53:32'
mtime: '1757408342558'
mtime_f: '2025-09-09 16:59:02'
---
## 法1：数学归纳法（不推荐）

$n=1$ 显然成立，设 $n=k$ 时成立，则 $n = k + 1$ 时

$$
\frac{n^2(n^2-1)}{12} = \frac{(k+1)^2k(k+2)}{12} = \frac{k^4+4k^3+5k^2+2k}{12}
$$

按照数学归纳法的套路，我们会考虑把式子拆成`n=k`的部分和剩余部分。但似乎不好拆，那我们考虑和`n=k`的那个整数做差，差是整数也能证明。做差以后得到 $\frac{4k^3+6k^2+2k}{12} = \frac{2k^3+3k^2+k}{6}$ ，这就是平方的前缀和。证毕

## 法2：取模运算的性质（通解，推荐）

数论基础会介绍取模的性质：

- `a % m + b % m = (a + b) % m`
- `a % m * b % m = (a * b) % m`

然后根据唯一分解定理，我们只需要分别证明它是4的倍数和3的倍数。以3为例，把n写成 $ku + v$ 的形式，于是只需要分别验证 $v = 0,\ 1,\ 2$ 的情况即可。

## 法3：组合数

根据参考链接1，我们看到题干的分子和分母都是**几个连续自然数的乘积**的形式，所以可以构造出组合数的定义式来做。

$$
\frac{n^2(n^2-1)}{12} = n(n-1)(n+1)\frac{2n}{24} = n(n-1)(n+1)\frac{(n-2)+(n+2)}{24}
$$

$$
= \frac{(n-2)(n-1)n(n+1)}{24} + \frac{(n-1)n(n+1)(n+2)}{24} = C_{n+1}^4 + C_{n+2}^4
$$

## 由组合数做法可扩展：证明 $\frac{n^2(n^2-1)(n^2-4)}{360} \in Z$

同样的手法，拆出 $n+3$ 和 $n-3$ ，可以构造出两个由6个连续自然数相乘构成的式子，而下面变成了 $6! = 720$

## 继续扩展：讨论 $n^2(n^2-1)(n+2)$ 什么时候整除 $5! = 120$

上面那道扩展题能构造出来是因为偶数次的多项式才有那种好性质。我们在此讨论 $n^2(n^2-1)(n+2)$ 何时性质足够好，能够整除120。我们不妨先写点JS在浏览器控制台运行一下，看看规律：

```js
for (let n = 1; n <= 60; n++) {
  console.log((n * n * (n + 1) * (n - 1) * (n + 2)) % 120);
}
```

发现 $n = 5k+2$ 时 $n^2(n^2-1)(n+2)$ 不整除120，余数48，其他情况都整除。有了上面讨论的基础，我们不难展开得到：

$$
\frac{n^2(n^2-1)(n+2)}{120} = (n-1)n(n+1)(n+2)\frac{(n-2)+2}{120}
$$

$$
= C_{n+2}^5 + \frac{2}{5}\frac{(n-1)n(n+1)(n+2)}{24} = C_{n+2}^5 + \frac{2}{5}C_{n+2}^4
$$

我们发现 $n = 5k+2$ 时可以让这4个连续自然数刚好避开模5余0，其他情况都避不开。讨论完毕

## 参考资料

1. https://www.bilibili.com/video/BV1LabczHEvn
2. 有时间研究一下里面的做法。 https://www.zhihu.com/question/552490365
