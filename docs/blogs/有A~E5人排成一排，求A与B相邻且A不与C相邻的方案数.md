---
tags:
  - 插空法
  - 逆向思维
  - 捆绑法
title: 有A~E5人排成一排，求A与B相邻且A不与C相邻的方案数
ctime: '1760029874671'
ctime_f: '2025-10-10 01:11:14'
mtime: '1761281007461'
mtime_f: '2025-10-24 12:43:27'
---
题源： https://www.bilibili.com/video/BV1kM4m117pY

## 法1：逆向思维

只需要满足A与B相邻的方案数很简单，捆绑法求得 $A_{2}^2*A_{4}^4=48$ 。这个方案数减去A与B、C都相邻的方案数就能得到答案。A与B、C都相邻，则B必须在中间，于是小团体的方案数是 $A_{2}^2$ ，同样由捆绑法得，要减去的方案数是 $A_{2}^2A_{3}^3=12$ ，答案为 $48-12=36$

## 法2：最后插C

同样先把A、B绑起来，则AB、D、E的排列方案数为 $A_{3}^3=6$ 。然后我们需要在AB、D、E排列的基础上插入C。共有4个空，与AB相邻的空有2个。这里要分类讨论：

- A在B左边，则C不能在AB左侧的空
- A在B右边，则C不能在AB右侧的空

综上，C在每种情况下能插的空都是4-1=3个。故答案为 $A_{2}^2*A_{3}^3*3=36$ 。最后插AB整体的分类讨论和法2类似，不妨归为同一种做法

## 法3：同时考虑插入AB和C

D、E排列方案数2，形成3个空。

1. AB和C占两个空，方案数 $A_{3}^2 = 6$ ，乘AB内部方案数2，总方案数12
2. AB和C占同一个空，则B必须在中间，因此只有ABC和CBA两种。有3个空，总方案数 $2*3=6$

综上，总方案数 $2*(12+6) = 36$
